# Comet

## Работа в консоли

### Сборка проекта

То с чего следует начать при работе с comet - инициализация рабочей директории. Для этого нужно ввести команду "setup":

``` shell
comet setup .
```

При это можно сразу указать значения некоторых параметров, например имя проекта:
``` sh
comet setup . "game"
```
Вот полный список флагов:
``` sh
-name=          устанавливает имя проекта
-version=       устанавливает версию проекта
-sources=       добавляет перечень папок с исходниками в проект
-includes=      добавляет перечень директорий с заголовочными фалами в проект
-L              добавляет список директорий для поиска библиотек в проект
-l              добавляет список библиотек в проект
-root=          устанавливает корень проекта проекта
-executable=  
-obj=

```

После чего в корневом катологе появится файл ".xconfig". Если использовались доп параметры при создании то он уже будет содержать какие-то инструкции. В ином случаее в нём буде строка "# Write your script here". (см. "Создание сценария"). 

После создания сценария, можно произвести сборку проекта с помощью каманды "build". Если у вас всего один проект, то его имя указываь не надо, в ином случае, имя обязательно должно быть указано.

``` sh
comet build 
```

После завершения выполнения команды напечатается сообщение о результате работы. Если необходима информация о протекании процесса, тогда нужно добавить флаг "-debug-info":

``` shell
comet build -debug-info
```

В случае, если изменения коснулись одного или пары файлов, то можно использовать флаг "f":
``` sh
comet build -f"main.cpp","test.cpp"
```

Также команда `sbuild` позволяет устанавливать значения переменных для компиляции
``` sh
comet build -Vmy_var=9,second=8
```

Список флагов:
``` sh
-debug-info     производит сборку проекта с выводом отладочной информацией
-save-info      сохранит информацию о текущей сборке в .comet/cache
-f              позволяет произвести компиляцию только выбранных файлов 
-V              позволяет установить значение переменных сценария
-to             позволяет сохранить результат в др. папку
-r              позволяет запустить программу после сборки с заданными аргументами
-D              позволяет определить макрос и его значние

```

``` sh
# Общие флаги
-parse-info     производит сборку проекта с выводом информации о парсере
    -as-tree    выводит абстрактное синтакстическое дерево
-lexer-info     производит сборку проекта с выводом информации о лексическом анализе
    -tokens     выводит список токенов
```

### Просмотр статуса проекта

Для того, чтобы узнать информацию о проекте можно воспользоваться командой "info":

``` sh
comet info
```

Она напечатает имя проекта, его версию, время последней сборки. Помимо этих данных можно также узнать и другую информацию, для этого нужно дописать дополнительное слово мз приведённого ниже списка:
``` sh
sources     выведет на экран полный список исходников
includes    выведет на экран список каталогов для поиска заголовочных файлов
objects     выведет список всех obj-файлов
root        выведет корень проекта
```

Также не стоит забывать, что если проектов несколько то необходимо писать имя проекта после "info":
``` sh
comet info test0 sources 
```

### Добавление файлов или библиотек

Система сборки comet позволяет использовать статические и динамические библиотеки, но желательно их переместить в рабочую директорию для независимости проекта от рассполежения этих библиотек. Также необходимо добавить соответствующую информацию в файл сценария. Для упрощения этого процесса можно использовать команду `add`:
``` sh
comet add -L<from> -p<project> <to>
```

Пример:
``` sh
comet add -L"C:\soft\mylib" -p"game" "lib\bin"
```

Помимо этого можно добавлять исходники, заголовочные файлы, файлы ресурсов
Пример с ресурсами:
``` sh
comet add -f"C:\Users\Admin\Images\pig.png" "res"
# или
comet add -d"C:\Users\Admin\Images\ForApp" "res"
```

Список флагов и их действия:
``` sh
-f      добавляет указанные файлы
-d      добавляет указанные директории
-S      добавляет каталог поиска исходников, если указать конечное местоположение (to), то копирует каталог
-s      добавляет файл исходника если указать конечное местоположение (to), то копирует файл
-I      добавляет каталог поиска заголовочных файлов, если указать конечное местоположение (to), то копирует каталог
```

